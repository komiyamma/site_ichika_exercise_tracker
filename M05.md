# 🌱 メモ第5章：要件をやさしく整理しよう

前の章までで「入力して表示」「削除して確かめる」ところまで体験できたので、ここでは **“どんなアプリにしたいか” をゆっくり言葉にしていく時間** にします。いきなり専門用語を並べず、いつも通りの手順で整理してみましょう。

---

## Step 0：第1〜4章でできたことを声に出す
- 第1章 … どんな技術が必要かを探した（HTML / JavaScript / localStorage）。  
- 第2章 … localStorage ならデータが消えないと知った。  
- 第3章 … フォーム1つで「入力→表示」が回るサイクルを体験。  
- 第4章 … `createdAt` を ID にして削除ボタンが動くと確認。

> ここまでで「追加・表示・削除」の根っこを触っただけでも十分すごい！

---

## Step 1：いちか（ペルソナ）に聞いてみる

- 「今日のトレーニング、さっとメモしたい」  
- 「昨日と比べてどうだったか、すぐ見返したい」  
- 「間違った行は消せないと困る」  
- 「後で日にちごとに見たい」

この一言一言が **“開発したい機能” のタネ** になります。

---

## Step 2：タネをつなげて “最低限の流れ” を書く
1. フォームに種目・日付などを入力して **記録を追加** する。  
2. 追加したデータが一覧に並んでいるのを **確認** する。  
3. いらない行を見つけたら **削除** できる。  
4. 日付を指定したら、その日の分だけに **絞り込める**。  
5. もう一度ページを開いても残っているように **保存（永続化）** する。

> 「できたら便利」を全部入れるのではなく、「これが無いと使えない」を先に揃えるイメージ。

---

## Step 3：画面をざっくり並べる（紙に落書きでもOK）
- 上：入力フォーム（種目 / 日付 / 時間 / 回数・重量 / メモ / 追加ボタン）  
- 中：フィルタエリア（日付ピッカー・解除ボタン・件数表示・デバッグ全削除ボタン）  
- 下：テーブル（列は 日付 / 種目 / 時間 / 回数・重量 / メモ / 操作ボタン）

> D03 の「リスト→テーブル」・D04 の「削除ボタン検証」を思い出すと構図がつかみやすいです。

---

## Step 4：データの形を一つに決める
```ts
type WorkoutEntry = {
  id: string;        // 削除ボタンに渡す目印
  date: string;      // 「2025-01-10」のような文字列
  type: string;      // 種目名（セレクトボックスの値）
  minutes: number;   // 練習時間（分）
  value: number;     // 回数や重量（数値）
  note: string;      // メモ（空でもOK）
  createdAt: number; // 追加した瞬間。並び替えにも使う
};
```

- `id` は `createdAt` を文字列にしたものでも OK。  
- 保存先のキー名：`ichikaWorkoutLogEntries`。  
- 保存するときは `JSON.stringify`、読み込むときは `JSON.parse` を使う（第2章のおさらい）。

---

## Step 5：操作順を声に出す
1. **最初の表示**：ページが開いたら DOM をつかんでイベントを登録 → localStorage から読み込み → テーブルを描画。  
2. **追加ボタン**：フォーム送信 → バリデーション → 配列へ `push` → 保存 → 再描画 → フォームをリセット。  
3. **削除ボタン**：`data-id` を読み取ってフィルタ → 配列を上書き → 保存 → 再描画。  
4. **日付フィルタ**：入力イベントで `renderEntryTable` を呼び、選択した日付だけに絞り表示。  
5. **フィルタ解除**：日付入力を空に戻して `renderEntryTable` を呼ぶ。  
6. **デバッグ全削除**：確認ダイアログ→OKなら localStorage のキーを削除→画面全体をリセット。

---

## Step 6：気をつけることメモ
- 種目と日付は必須にして、空ならアラートを出してみよう。  
- 数字の入力は `min="0"` とか `type="number"` を使うとブラウザが助けてくれる。  
- `JSON.parse` が失敗したら try-catch で空配列に戻す。  
- どうしてもうまくいかないときはデバッグ用全削除ボタンで状態をリセット。

---

## Step 7：第6章以降へむけて
これで「どこに何が必要か」がだいぶ整理できました。次の章では、ここで決めたフォームやテーブルを実際のコードに落としていきます。焦らず、Step 0〜6 に戻りながら進めていきましょう！
