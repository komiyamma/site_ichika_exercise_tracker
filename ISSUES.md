# このプロジェクトの改善点 (ISSUES)

こんにちは！このプロジェクトは、JavaScriptの基本を学ぶのにとても良い教材ですね。
コードもきれいに整理されていて、素晴らしいです。

ここでは、さらに一歩進んで、もっと素敵なプログラムにするための改善点をいくつか提案します。
ぜひ、チャレンジしてみてくださいね！

---

### 1. 削除する前に、本当に消して良いか確認しよう

**🚩 どんなこと？**

今は「Delete」ボタンを押すと、すぐに記録が消えてしまいます。
でも、もし間違えて押しちゃったら…大変！
そこで、削除する前に「本当に削除しますか？」のような確認メッセージを表示するようにしてみましょう。

**🤔 どうして大切？**

ユーザーが間違った操作をしてしまっても、データが消えてしまわないように守ってあげるのは、とても大切な「思いやり」です。
`window.confirm()` という命令を使うと、簡単に確認ダイアログを出すことができますよ。

**💡 ヒント**

- `removeButtonClick` という関数の中で、削除処理をする前に `window.confirm()` を呼び出してみましょう。
- もしユーザーが「OK」を押したら処理を進め、「キャンセル」を押したら何もしない、というように条件分岐（`if`文）を使います。

---

### 2. HTML と JavaScript の役割を分けてみよう

**🚩 どんなこと？**

今、削除ボタンのクリックイベントは、`script.js` の中でHTMLコードとして直接 `onclick="..."` と書かれています。
これを、JavaScript側でイベントを設定する方法（`addEventListener`）に変えてみましょう。

**🤔 どうして大切？**

HTMLは「サイトの骨格」、CSSは「見た目」、JavaScriptは「動き」と、それぞれの役割をしっかり分けると、コードがとても見やすくなります。これを「関心の分離」と言います。
将来、もっと大きなプログラムを作るときに、この考え方がとても役に立ちます。

**💡 ヒント**

- `renderEntryTable` 関数の中で `onclick` を書くのをやめます。
- 代わりに、`entryListElement` に対して `addEventListener('click', ...)` を設定します。
- クリックされたのが本当に削除ボタンか、`event.target` というものを使ってチェックするのがポイントです。これを「イベント委任（デリゲーション）」と言って、少し難しいですが、とてもパワフルなテクニックです。

---

### 3. もっと安全にHTMLを組み立てよう

**🚩 どんなこと？**

`renderEntryTable` 関数では、`innerHTML` という命令を使って、HTMLの文字列を組み立ててテーブルを作っています。
これを、`document.createElement` や `element.append` といった命令を使って、一つずつ要素を作って追加する方法に変えてみましょう。

**🤔 どうして大切？**

`innerHTML` は手軽ですが、もしユーザーが入力したメモ欄に悪いプログラム（`<script>...</script>`など）が書かれていた場合、それがそのまま実行されてしまう危険性（クロスサイトスクリプティング、XSSと言います）があります。
`escapeHtml` という関数で対策されていますが、`createElement` を使うと、そもそもHTMLとして解釈されないので、もっと安全になります。

**💡 ヒント**

- `for...of` ループの中で、まず `document.createElement('tr')` で行（`<tr>`）を作ります。
- 次に `document.createElement('td')` でセル（`<td>`）を必要な数だけ作り、`textContent` プロパティに行の内容をセットします。
- 最後に、`append` を使って、行（`<tr>`）にセル（`<td>`）を、テーブル（`<tbody>`）に行（`<tr>`）を追加していきます。

---

### 4. JavaScript側でも入力内容をチェックしよう

**🚩 どんなこと？**

時間（分）や回数の入力欄は、HTMLで `min="0"` と設定されているので、画面上ではマイナスの数値を入力できません。
しかし、もしHTMLが書き換えられてしまった場合、JavaScript側ではチェックしていないので、マイナスの値が保存されてしまいます。
そこで、JavaScript側でも値が0以上かチェックするようにしてみましょう。

**🤔 どうして大切？**

画面（フロントエンド）でのチェックだけでなく、データを保存する側（今回はJavaScript）でもしっかりチェックすることを「二重検証」と言います。
これにより、予期せぬデータが入ってくるのを防ぎ、プログラムがもっと頑丈（堅牢）になります。

**💡 ヒント**

- `handleFormSubmit` 関数の中で、`entry` オブジェクトを作った後、`entry.minutes` や `entry.value` が 0 より小さいかどうかを `if` 文でチェックします。
- もしマイナスの値だったら、`alert` でメッセージを出し、`return` して処理を中断します。

---

### 5. グローバル変数を減らしてみよう

**🚩 どんなこと？**

`script.js` の一番上で、たくさんの変数が `let` で宣言されていますね。これを「グローバル変数」と言います。
これを、それぞれの関数の中でしか使わない「ローカル変数」にしたり、まとめてオブジェクトにしたりして、グローバル変数を減らす工夫をしてみましょう。

**🤔 どうして大切？**

グローバル変数は、プログラムのどこからでも書き換えられるため、意図しないところで値が変わってしまい、バグの原因になりやすいです。
変数が使える範囲（スコープ）をできるだけ狭くすることは、コードを安全で読みやすくするための、とても大切なテクニックです。

**💡 ヒント**

- `initializePage` 関数の中で、DOM要素を取得する処理をまとめてみましょう。
- そして、取得した要素をまとめるためのオブジェクト（例えば `const view = {};`）を用意し、そのプロパティとして `view.entryFormElement = ...` のように代入します。
- 他の関数からは、この `view` オブジェクトを通して要素にアクセスするように変更します。

---

これらの課題は、少し難しいものもあるかもしれません。
でも、一つ一つクリアしていくことで、必ずレベルアップできます。応援しています！
