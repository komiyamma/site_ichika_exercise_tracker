# 学習者がつまずきそうな点 (ISSUES)

## 全体を通して

この教材は、ハンズオン形式で少しずつ機能を追加していく構成になっており、初学者が挫折しにくいように工夫されています。特に、各章の冒頭で「思考の軌跡」として、なぜその機能が必要なのか、どのように実装を考えるのか、という開発者の思考プロセスを言語化している点は、素晴らしいと感じました。

一方で、JavaScriptを4ヶ月学習したレベルの学習者にとっては、いくつかの点で説明不足と感じる可能性のある箇所が見受けられました。

## 章ごとの具体的な指摘

### D02.md: localStorage入門

-   **`JSON.stringify()`の出力結果がイメージしにくい**
    -   `JSON.stringify()`でオブジェクトが文字列に変換される、と説明されていますが、変換後の文字列が具体的にどのようなものか（例：`'{"type":"ランニング"}'`）という実例が少ないため、学習者は「オブジェクトを文字列にするとはどういうことか？」と戸惑う可能性があります。`console.log`で文字列化された結果も表示して、変換前と後の違いを見せるなどの工夫があると、より理解が深まりそうです。

### D03.md: フォームと表示エリアの最小ループを体験しよう

-   **`event.preventDefault()`の役割が分かりにくい**
    -   コードには「ページ遷移を防ぐ」とコメントされていますが、なぜフォームを送信するとページ遷移が起こるのか、というHTMLの`<form>`タグのデフォルトの挙動についての説明がありません。
    -   学習者は「なぜこの1行が必要なのだろう？」と疑問に思い、応用が効かない「おまじない」として覚えてしまう可能性があります。`<form>`タグが本来持っている画面遷移の役割と、JavaScriptで非同期に処理を行うために、なぜそのデフォルトの挙動をキャンセルする必要があるのかを補足すると、より理解が深まるでしょう。
-   **`toSorted`と`sort`の違いが分からない**
    -   配列を並び替える際に`toSorted`メソッドが使われていますが、多くの学習者が先に学ぶであろう`sort`メソッドとの違い（`toSorted`は新しい配列を返し、元の配列を変更しない）についての説明がありません。なぜここでは`sort`ではなく`toSorted`が適しているのか、という点に触れると、不変性（Immutability）の重要さも伝えられる良い機会になります。
-   **`Date.now()`が返す値が抽象的**
    -   `Date.now()`が返すタイムスタンプについて「1970年からの経過ミリ秒」と説明されていますが、この数値そのものに馴染みがなく、学習者がイメージしにくい可能性があります。「時間と共に必ず増えるユニークなIDとして使える魔法の数字」のような、より直感的な説明を先に持ってくると、苦手意識を減らせそうです。

### D04.md: `createdAt`を ID にして削除ボタンを検証しよう

-   **イベントデリゲーションの概念が高度すぎる**
    -   `tbody`に1つだけイベントリスナーを設定する方法（イベントデリゲーション）は効率的ですが、`map`/`filter`を覚えたての学習者にとっては、`event.target`がなぜクリックされた要素を指すのか、という仕組みの理解が難しいかもしれません。各ボタンに直接`addEventListener`を設定する素朴な実装と比較する形で示すと、イベントデリゲーションのメリットがより伝わりやすくなります。
-   **`let`と`const`の使い分けの理由が分かりにくい**
    -   配列を`const`から`let`に変更する指示がありますが、なぜ`filter`メソッドを使うと再代入が必要になるのか（`filter`が元の配列を変更せずに新しい配列を返すため）という説明が不足しています。`let`と`const`の使い分けに悩む学習者は多いため、ここは丁寧に解説したいポイントです。
-   **`Number()`による型変換の必要性が伝わりにくい**
    -   `event.target.dataset.id`から取得したIDを`Number()`で数値に変換していますが、なぜこの処理が必要なのか（`dataset`プロパティの値は常に文字列だから）という説明がありません。JavaScriptにおける「厳密な比較（`===`）」と「型」の重要性を伝える良い機会なので、補足説明があると親切です。

### D07.md: データ構造と `localStorage` の理解

-   **`parseInt(..., 10) || 0` のショートハンドがトリッキー**
    -   入力値を数値に変換する際に`parseInt(minutesInputElement.value, 10) || 0`という書き方が使われています。これは空文字などが`parseInt`によって`NaN`になることを防ぐためのテクニックですが、`||`演算子を論理演算以外で使うことに慣れていない学習者は混乱する可能性があります。三項演算子や`if`文を使った、より冗長な書き方と比較して見せると、このショートハンドの便利さが伝わりやすくなります。

### D10.md: 削除機能の実装

-   **`addEventListener`と`onclick`属性の使い分けが混乱を招くかも**
    -   これまでの章では`addEventListener`を使ってイベントハンドラを設定していましたが、この章の削除ボタンでは、HTMLに直接`onclick`属性を記述する方法が採用されています。
    -   なぜここで実装方法を切り替えたのか、それぞれの方法にどのようなメリット・デメリットがあるのか（例：`onclick`は手軽だが、1つのイベントに1つの関数しか登録できないなど）についての説明がありません。
    -   学習者が「どちらを使えばいいのだろう？」と混乱してしまう可能性があります。

### D13.md: 最終調整と動作確認

-   **`try...catch`によるエラーハンドリングが唐突**
    -   `localStorage`の読み書き処理に`try...catch`構文が追加されますが、エラーハンドリングという概念自体が初学者には難しいものです。なぜこれが必要なのか（例：ブラウザのプライベートモードでは`localStorage`が使えずエラーになることがある）、もし`catch`されなかったらどうなるのか（アプリがクラッシュする可能性がある）といった背景を説明すると、より実践的な学びになります。
-   **`escapeHtml`関数の必要性が分かりにくい**
    -   XSS（クロスサイトスクリプティング）対策として`escapeHtml`関数が導入されていますが、このセキュリティリスクの重要性が伝わりにくいかもしれません。「メモ欄に`<script>alert('こんにちは！')</script>`と入力するとどうなるか」といった具体的な危険な例を示し、`escapeHtml`がそれをどのように無害化するのかを見せることで、セキュリティ意識を高めることができます。
