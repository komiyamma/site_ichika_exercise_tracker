# 📝 メモ第5章：いちから作る要件メモ（ゆっくり版）

> **対象**：JavaScript 学習4か月目／HTML と CSS も練習中の初心者さん  
> **目的**：難しい用語に頼らず、「どんなアプリを作りたいか」を自分の言葉で整理する

ここまでの章では「少しやってみる → 振り返る」をくり返してきました。第5章は、体験したことをやさしく並べ替えて「これがあればアプリになるよね」という道しるべを作ります。学校のノートに書き写す気分で、一歩ずつ進んでみましょう。

---

## Step 0：ふり返りノートを1枚用意する
1. 紙でもテキストファイルでもOK。ページの上に「第5章 要件メモ」と書く。  
2. 左に「やったこと」、右に「気づいたこと」の2列を作る。  
3. 第1章〜第4章を思い出して、表を埋めてみる。  
   - 例：「第3章→フォーム一つでも画面が動くと知った」  
   - 例：「第4章→作った時間をID代わりにできると分かった」  
4. 空欄があっても大丈夫。あとで気づいたら追記すればOK。

> ☕ ここで一息つくと、頭が整理された状態で次に進めます。

---

## Step 1：いちか（ペルソナ）に質問してみる
誰かにインタビューするつもりで、以下の問いを自分のノートに書いてみましょう。

| 質問 | いちかの答えの例 |
| --- | --- |
| 今日はどんな練習をした？ | 「ワイドスクワットを30分」 |
| それを記録する理由は？ | 「次の試合までにどれくらい頑張れたか忘れたくない」 |
| 記録するときに困ることは？ | 「紙だと無くすし、ノート開くのが面倒」 |
| あとで見返したいのはどんな瞬間？ | 「昨日と今日で回数が増えたか？」「大会前の追い込み時期」 |
| 間違えて入力したらどうしたい？ | 「迷わずさっと消したい」 |

質問が増えてもOKです。答えが集まるほど、アプリの形がハッキリします。

---

## Step 2：今日やりたい“体験”を書き出す
Step1の答えを眺めながら、「これができたら嬉しい」を小さな文章にします。

- 例1：フォームに練習内容を書いて「追加」を押すとテーブルに並ぶ。  
- 例2：日付欄に「2025-01-10」と入れると、その日の練習だけが表示される。  
- 例3：失敗した行の「削除」を押すと、挙動を見ながら消える。  
- 例4：ページを閉じても、保存されていたら翌日も残っている。

> 🔍 ここでは「ユーザーがやりたいこと」に集中します。技術の話は後でOK。

---

## Step 3：形にしてみる（手書きスケッチ推奨）
1. 紙に縦長の長方形を描き、「トップ」「まんなか」「下」の3ブロックにわける。  
2. 各ブロックに置きたい要素を書き込む。例：
   - トップ：フォーム（種目 / 日付 / 時間 / 回数・重量 / メモ / 追加ボタン）  
   - まんなか：日付フィルタ、フィルタ解除、登録件数、デバッグ全削除ボタン  
   - 下：テーブル（列名のモックを書き込む）  
3. 余裕があれば、入力例やボタンのラベルを書き添える。  
4. 「ここが難しそう…」と思った場所に ✕ や ⚠ をつけておくと、後で振り返りやすいです。

> 📸 余裕があればスマホで写真を撮っておくと、進捗記録にもなります。

---

## Step 4：データの箱を決める（コードの形でメモ）
フォームで入力したものがどんな形で保存されるか、TypeScript 風に書いてみます。実際に TypeScript を使わなくても構いません。「箱の中身」をはっきりさせるためのメモです。

```ts
type WorkoutEntry = {
  id: string;        // 削除ボタンが押されたときに使う目印
  date: string;      // 例: "2025-02-20"
  type: string;      // 種目名（セレクトボックスで選ぶ）
  minutes: number;   // 運動時間（分）
  value: number;     // 回数 or 重量など（数値）
  note: string;      // メモ（空文字もOK）
  createdAt: number; // Date.now() で取得したタイムスタンプ
};
```

- `id` は `String(createdAt)` としても良いし、`crypto.randomUUID()` を使ってもOK。学習のゴールとして、最初は `createdAt` を文字列化する方法を採用します。  
- 保存するときは `JSON.stringify(entries)`、読み出すときは `JSON.parse()`。第2章のおさらいです。

---

## Step 5：操作のむねのうち（ストーリー方式）
いきなりフローチャートを描くと固まってしまう…という方は、日記のように文章にしてみましょう。

```
1. ページを開いた瞬間に、フォームとテーブルを空の状態で表示する。localStorage からデータが入っていたら、そこからテーブルを作る。
2. 種目・日付・メモを入力し、追加ボタンを押す。空欄があればアラートを出す。
3. 入力が大丈夫なら、新しいオブジェクトを作って配列に `push`。Date.now() で `createdAt` を入れて、`id` にも同じ値を使う。
4. 配列を `localStorage` に保存する。保存に成功したらテーブルを再描画する。
5. テーブルの削除ボタンを押したら `data-id` を読み取り、`filter` で残すべきデータだけにする。配列を丸ごと置き換えて保存し、再描画。
6. 日付フィルタに値が入ったら `renderEntryTable()` を呼んで、その日付だけ表示。空に戻したら全件表示。
7. デバッグ用の全削除ボタンは「本当に消す？」と確認してから `removeItem` → テーブルを空にする。
```

> 💬 声に出すと、「ここが不安かも…」というポイントに気づきやすいです。

---

## Step 6：チェックリストを作る
| 項目 | OK? | メモ |
| --- | --- | --- |
| 種目と日付は必須？ | ☐ | 入力欄に `required` を入れる |
| 数字の欄は 0 以上？ | ☐ | `min="0"` や `type="number"` を使う |
| 保存に失敗した場合は？ | ☐ | `try...catch` で空配列に戻す |
| テーブルは最新順？ | ☐ | `toSorted((a, b) => b.createdAt - a.createdAt)` を使う |
| ローカルデータを消す手段は？ | ☐ | デバッグ全削除ボタン |

### ミニワーク
- 1つでも「☐」があったら、その行だけを次回の課題にしてみましょう。  
- 友だちのチェックリストと交換して、お互いに気づきを書き込むのもおすすめです。

---

## Step 7：ドキドキポイントの棚卸し
> 次の章で「ここが不安…」と思っている場所に付箋を貼るつもりで書き出します。

- フォームの値を全部 `trim()` するのを忘れそう。  
- `localStorage` の中身が壊れていたらどうしよう？  
- ボタンがたくさんあるとイベントの付け方で混乱しそう。  
- CSS がまだ不安なので、Box を目立たせたいときは Bootstrap を使おうかな。

不安を書いておくと、章が進むたびに「ここに答案がある！」と気づけます。

---

## Step 8：次のアクションを3つ決める
1. **フォームの HTML を作ってみる**（まだ JS は書かなくても OK）。  
2. **テーブルの `tbody` にダミーデータを手書き**して、どんな列が必要か確かめる。  
3. **D03 と D04 のサンプルをもう一度動かす**。削除ボタンの動きに慣れておく。

> ✅ 3つともできたら、第6章に進む準備は万端です！

---

### おまけ：困ったときのQ&Aメモ
- **Q. localStorage の中身を見たいときは？**  
  → F12 → Console → `JSON.parse(localStorage.getItem('ichikaWorkoutLogEntries'))`

- **Q. ID がかぶったらどうする？**  
  → 心配なら `id: crypto.randomUUID()` に挑戦してみる。対応ブラウザは多いです。

- **Q. フィルタで何も表示されないのが正しいか不安…**  
  → `console.log(filteredEntries)` で中身を先に確認してから描画する。

---

## まとめメモ（声に出して読んでみよう）
1. 「追加・表示・削除・フィルタ・保存」の順番で考えれば迷わない。  
2. 画面の配置とデータの形をメモしておくと、HTML と JS を書くときに安心。  
3. 不安なポイントを事前に書き出すと、次の章で理解した瞬間に「できた！」と実感できる。

これで“自分の言葉で説明できる要件メモ”が手元にできました。次は第6章で、ここに書いたアイデアを一つずつ形にしていきましょう！
